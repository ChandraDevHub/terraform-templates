parameters:
  workingDirectory: ''     # will be passed by parent pipeline
  varFile: ''              # will be passed by parent pipeline

jobs:
  - job: Terraform_Destroy
    displayName: "Terraform Destroy"
    pool:
      vmImage: "ubuntu-latest"
    steps:
      - task: TerraformCLI@1
        inputs:
          command: "destroy"
          workingDirectory: ${{ parameters.workingDirectory }}
          environmentServiceName: "Azure-Service-Connection"
          varsFiles: ${{ parameters.varFile }}
          additionalArgs: "-auto-approve"
